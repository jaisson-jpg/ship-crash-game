# Regras do Firestore para Ship Crash Game

# Versão das regras
rules_version = '2';

# Serviço do Firestore
service cloud.firestore {
  match /databases/{database}/documents {
    
    # Regras para a coleção 'users'
    match /users/{userId} {
      # Permitir leitura e escrita se o usuário estiver autenticado e for o próprio usuário
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    # Regras para a coleção 'system'
    match /system/{document} {
      # Permitir leitura e escrita para usuários autenticados
      allow read, write: if request.auth != null;
    }
    
    # Regras para a coleção 'systemSettings'
    match /systemSettings/{document} {
      # Permitir leitura e escrita para usuários autenticados
      allow read, write: if request.auth != null;
    }
    
    # Regras para outras coleções (game data, etc.)
    match /{document=**} {
      # Permitir leitura e escrita para usuários autenticados
      allow read, write: if request.auth != null;
    }
  }
}

# Como aplicar essas regras:
# 1. Vá para o Console do Firebase
# 2. Navegue para Firestore Database
# 3. Clique em "Rules"
# 4. Substitua as regras existentes pelas regras acima
# 5. Clique em "Publish"

# Explicação das regras:
# - request.auth != null: Verifica se o usuário está autenticado
# - request.auth.uid == userId: Verifica se o usuário está acessando seus próprios dados
# - Para coleções do sistema, qualquer usuário autenticado pode ler/escrever
# - Para outras coleções, qualquer usuário autenticado pode ler/escrever 